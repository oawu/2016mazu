<?php defined('BASEPATH') OR exit('No direct script access allowed');

/**
 * @author      OA Wu <comdan66@gmail.com>
 * @copyright   Copyright (c) 2015 OA Wu Design
 */

class Migration_Add_menu_roles extends CI_Migration {
  public function up () {
    $this->db->query (
      "CREATE TABLE `menu_roles` (
        `id` int(11) NOT NULL AUTO_INCREMENT,
        `menu_id` int(11) NOT NULL COMMENT 'Menu ID',
        `role` varchar(100) COLLATE utf8_unicode_ci NOT NULL COMMENT '角色',
        `updated_at` datetime NOT NULL DEFAULT '" . date ('Y-m-d H:i:s') . "' COMMENT '更新時間',
        `created_at` datetime NOT NULL DEFAULT '" . date ('Y-m-d H:i:s') . "' COMMENT '新增時間',
        PRIMARY KEY (`id`),
        KEY `menu_id_index` (`menu_id`),
        KEY `role_index` (`role`),
        UNIQUE KEY `menu_id_role_unique` (`menu_id`, `role`),
        FOREIGN KEY (`menu_id`) REFERENCES `menus` (`id`) ON DELETE CASCADE
      ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;"
    );

    $this->db->query (
      "INSERT INTO `menu_roles` (`id`, `menu_id`, `role`, `updated_at`, `created_at`)
        VALUES (NULL, 1, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 1, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 1, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 1, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 2, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 2, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 2, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 2, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 3, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 3, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 3, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 3, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 4, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 4, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 4, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 4, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 5, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 5, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 5, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 5, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 6, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 6, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 6, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 6, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 7, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 7, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 7, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 7, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 8, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 8, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 8, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 8, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 9, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 9, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 9, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 9, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 10, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 10, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 10, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 10, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 11, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 11, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 11, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 11, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 12, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 12, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 12, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 12, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 13, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 13, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 13, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 13, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 14, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 14, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 14, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 14, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 15, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 15, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 15, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 15, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 16, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 16, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 16, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 16, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 17, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 17, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 17, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 17, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 18, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 18, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 18, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 18, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 19, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 19, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 19, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 19, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 20, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 20, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 20, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 20, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 21, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 21, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 21, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 21, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 22, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 22, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 22, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 22, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 23, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 23, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 23, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 23, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 24, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 24, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 24, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 24, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 25, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 25, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 25, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 25, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 26, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 26, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 26, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 26, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 27, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 27, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 27, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 27, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 28, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 28, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 28, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 28, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28'),
               (NULL, 29, 'root', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 29, 'admin', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 29, 'login', '2015-09-14 16:50:28', '2015-09-14 16:50:28'), (NULL, 29, 'guest', '2015-09-14 16:50:28', '2015-09-14 16:50:28');");
  }
  public function down () {
    $this->db->query (
      "DROP TABLE `menu_roles`;"
    );
  }
}