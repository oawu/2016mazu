/**
 * @author      OA Wu <comdan66@gmail.com>
 * @copyright   Copyright (c) 2016 OA Wu Design
 */

!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){t.fn.extend({OAmobileScrollView:function(e){var s={trigger_length:50,show_arrow:!1},n=function(e){var s=1,n=t(this).addClass(e.show_arrow?"a":null),a=t("<a />").prependTo(n).append("❮"),i=t("<a />").appendTo(n).append("❯"),l=n.find("> div"),d=l.find("> *"),o=n.width(),r=d.width()+parseFloat(d.css("border-left-width"))+parseFloat(d.css("border-right-width"))+parseFloat(d.css("margin-right"))+parseFloat(d.css("margin-right")),f=(r-o)/2,h=-(r*s+f);l.addClass("n"+d.length).css({left:h}).draggable({axis:"x",start:function(){t(this).removeClass("t")},stop:function(){t(this).addClass("t"),Math.abs((t(this).offset().left+r*s+f)%o)>e.trigger_length&&(s+=parseFloat(t(this).offset().left+r*s+f)<0?1:-1),s+1>d.length&&(s=d.length-1),h=-(r*s+f),t(this).css({left:(s+1==d.length?h-f:h>0?0:h)+"px"})}}),i.click(function(){l.addClass("t"),++s>d.length&&(s=d.length-1),h=-(r*s+f),l.css({left:(s+1==d.length?h-f:h>0?0:h)+"px"})}),a.click(function(){l.addClass("t"),--s-1<0&&(s=0),h=-(r*s+f),l.css({left:(s+1==d.length?h-f:h>0?0:h)+"px"})}),n.addClass("s"),setTimeout(function(){n.addClass("z")},300)};return e=t.extend(!0,s,e),t(this).addClass("OA-mobileScrollView").each(function(){setTimeout(n.bind(t(this),e),50)})}})});